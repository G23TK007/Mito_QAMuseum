{% load static %}
{% load django_bootstrap5 %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html>
    <head>
        {% bootstrap_css %}
        {% bootstrap_javascript %}
        <title>アニーリング計算</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'QAmuseum/style.css' %}">
        
    </head>


    <body>
        <header>
            <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-indigo">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">大村智記念学術館</a>
                </div>
            </nav>
        </header>
        <div class="container">
        <main>
            <div>
               
                <a href="{% url 'Parameter' pk  %}"class="btn btn-danger btn-block" role="button" style="width:10em;
                height:5em;margin-top:1em;"><font size="5">設定へ戻る</font></a><br>
                </div>
        次の設定で計算を行います。<br>
        
        美術館:{{object.museumname}}<br>
        巡回時間：{{object.time}}分<br>
        歩行速度：{{object.get_speed_display}}&lpar;{{object.speed}}m/分&rpar;<br>
        閲覧時間：{{object.get_browse_display}}<!--&lpar;&times;{{object.browse}}&rpar;--><br>
       
        <div class="text-center">
        <button type="button" onclick="clickbtn()" class="btn btn-success btn-block">計算実行</button><br>
        <a id="text" class="btn btn-success btn-block" role="button" style="width:10em;
        height:5em;margin-top:1em;"><br><p class='bg'>実行待ち</p></a><br></div>

        <script>
            text=document.getElementById("text")
            textset=document.createElement("p")
            function clickbtn() {
                text.innerHTML="<br><p class='bg'>計算中</p>";
                $.ajax({
                    url:"{% url 'calculate' pk%}",
                    method:'GET',
                    dataType:"text",
                })
                .done(function(data) {
                    str="<br><p class='bg'>経路表示</p>"
                    text.innerHTML = str;
                    text.href="{% url 'AllMuseumPath' pk%}"
                    console.log("success");
                });
            }
        </script></div>
        
    </body>
</html>