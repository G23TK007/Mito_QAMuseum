{% load static %}
{% load django_bootstrap5 %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html>
    <head>
        {% bootstrap_css %}
        {% bootstrap_javascript %}
        <title>再最適化
        </title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <style>
            
            button{

                margin-top: 1em;
                width:10em;
                height:5em;
                
            }
            header{
                position:fixed;
                top:0;
                width:100%;
                height:100px;
                font-size: larger;
            }
            main{
                margin-top: 150px;
                width:100%;
            }
            body{
                font-size: 300%;
            }
            
            #id_time ,#id_speed,#id_browse{
                width: 250px;
            }
            .navbar-brand{
                font-size: 100%;
            }
            .btn-success{
                margin-top:1em;
                font-size: 80%;
            }
            .btn-primary{
                margin-top:1em;
                font-size: 80%;
            }
            .container{
                font-size: 125%;
            }
            .bg{
                font-size: 150%;
            }
            .bh{
                font-size:120%;
            }

        </style>
    </head>


    <body>
        <header>
            <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">大村記念学術館経路最適化</a>
                </div>
            </nav>
        </header>
        <div class="container">
        <main>
            予定巡回時間より遅れています。再度経路の計算を行いますか？
            <div class="text-center">
                <button type="button" onclick="clickbtn()" class="btn btn-primary btn-block"><p class='bg'>再計算実行</p></button><br>
                <a id="text" class="btn btn-success btn-block" role="button" style="width:10em;
                height:5em;margin-top:1em;"><br><p class='bh'>経路案内に戻る</p></a><br></div>
        
                <script>
                    text=document.getElementById("text")
                    text.href="{% url 'MuseumPath' pk%}"
                    textset=document.createElement("p")
                    function clickbtn() {
                        text.innerHTML="<br><p class='bg'>計算中</p>";
                        $.ajax({
                            url:"{% url 'calculate' pk%}",
                            method:'GET',
                            dataType:"text",
                        })
                        .done(function(data) {
                            str="<br><p class='bg'>修正経路表示</p>"
                            text.innerHTML = str;
                            text.href="{% url 'MuseumPath' pk%}"
                            console.log("success");
                        });
                    }
                </script></div>
        
    </body>
</html>